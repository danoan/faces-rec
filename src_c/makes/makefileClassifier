magick_left:=`MagickWand-config --cflags`
magick_right:=`MagickWand-config --ldflags`

source:=../source
object:=../object
lib:=../lib

module:=classifier

object_path:=$(object)/$(module)
source_path:=$(source)/$(module)
lib_path:=$(lib)


all: classifier.o integralImage.o loader.o trainer.o trainingImage.o trainingImageRepository.o tableItem.o classificationTable.o cascadeClassifier.o validationSet.o trainingSet.o imageSet.o directory.o
	ar rc $(lib_path)/libclassifier.a $(object_path)/classifier.o $(object_path)/integralImage.o $(object_path)/loader.o $(object_path)/trainer.o $(object_path)/trainingImage.o $(object_path)/trainingImageRepository.o $(object_path)/tableItem.o $(object_path)/classificationTable.o $(object_path)/cascadeClassifier.o $(object_path)/validationSet.o $(object_path)/trainingSet.o $(object_path)/imageSet.o $(object_path)/directory.o

directory.o:
	g++ $(magick_left) -o $(object_path)/directory.o -c $(source_path)/directory.cpp $(magick_right) -O3 -w

trainingSet.o:
	g++ $(magick_left) -o $(object_path)/trainingSet.o -c $(source_path)/trainingSet.cpp $(magick_right) -O3 -w

imageSet.o:
	g++ $(magick_left) -o $(object_path)/imageSet.o -c $(source_path)/imageSet.cpp $(magick_right) -O3 -w

validationSet.o:
	g++ $(magick_left) -o $(object_path)/validationSet.o -c $(source_path)/validationSet.cpp $(magick_right) -O3 -w

cascadeClassifier.o:
	g++ $(magick_left) -o $(object_path)/cascadeClassifier.o -c $(source_path)/cascadeClassifier.cpp $(magick_right) -O3 -w

trainingImage.o:
	g++ $(magick_left) -o $(object_path)/trainingImage.o -c $(source_path)/trainingImage.cpp $(magick_right) -Llib -lfeature -lutil -O3 -w

trainer.o:
	g++ $(magick_left) -o $(object_path)/trainer.o -c $(source_path)/trainer.cpp $(magick_right) -Llib -lfeature -lutil -O3 -w

trainingImageRepository.o:
	g++ $(magick_left) -o $(object_path)/trainingImageRepository.o -c $(source_path)/trainingImageRepository.cpp $(magick_right) -Llib -lfeature -O3 -w	

tableItem.o:
	g++ $(magick_left) -o $(object_path)/tableItem.o -c $(source_path)/tableItem.cpp $(magick_right) -O3 -w	

classificationTable.o:
	g++ $(magick_left) -o $(object_path)/classificationTable.o -c $(source_path)/classificationTable.cpp $(magick_right) -O3 -w	

classifier.o:
	g++  $(magick_left) -o $(object_path)/classifier.o -c $(source_path)/classifier.cpp $(magick_right) -Llib -lfeature -O3 -w

integralImage.o:
	g++ $(magick_left) -o $(object_path)/integralImage.o -c $(source_path)/integralImage.cpp $(magick_right) -Llib -lfeature -O3 -w

loader.o:
	g++ $(magick_left) -o $(object_path)/loader.o -c $(source_path)/loader.cpp $(magick_right) -O3 -w